<%- layout("/layouts/boilerplate.ejs") %>

    <style>
        /* ===== Airbnb-style Icon Bar ===== */
        .filter-bar-wrapper {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
        }

        .filter-bar {
            display: flex;
            gap: 2rem;
            padding: 1rem 2rem;
            border-bottom: 1px solid #ddd;
            overflow-x: auto;
        }

        .filter-bar::-webkit-scrollbar {
            display: none;
        }

        .filter-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #717171;
            cursor: pointer;
            min-width: 80px;
            transition: color 0.2s ease, transform 0.2s ease;
        }

        .filter-item i {
            font-size: 1.4rem;
            margin-bottom: 0.35rem;
        }

        .filter-item span {
            font-size: 0.85rem;
            font-weight: 500;
        }

        .filter-item:hover {
            color: #000;
            transform: scale(1.05);
        }

        /* ===== Cards ===== */
        .listing-link {
            text-decoration: none;
            color: inherit;
        }
        #tax-info {
            font-size: 0.75rem;
            color: #555;
            display: none;
        }
        .toggle-switch {
            display: flex;
            align-items: center;
            margin-left: auto;
            border: 1px solid #ebe1e1;
            border-radius: 1rem;
            padding: 0.2rem 0.5rem;
            margin-left: 3rem;
        }
    </style>




    <!-- ===== Airbnb-style Icon Bar ===== -->
    <div class="filter-bar-wrapper">
        <div class="filter-bar">

            <div class="filter-item">
                <i class="fa-solid fa-house"></i>
                <span>Homes</span>
            </div>

            <div class="filter-item">
                <i class="fa-solid fa-mountain-sun"></i>
                <span>Mountain</span>
            </div>

            <div class="filter-item">
                <i class="fa-solid fa-water"></i>
                <span>Beach</span>
            </div>

            <div class="filter-item">
                <i class="fa-solid fa-city"></i>
                <span>City</span>
            </div>

            <div class="filter-item">
                <i class="fa-solid fa-tree"></i>
                <span>Nature</span>
            </div>

            <div class="filter-item">
                <i class="fa-solid fa-fire"></i>
                <span>Trending</span>
            </div>

            <div class="filter-item">
                <i class="fa-solid fa-crown"></i>
                <span>Luxury</span>
            </div>
            <div class="toggle-switch">
                <div class="form-check form-switch form-switch-reverse">
                    <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
                    <label class="form-check-label" for="switchCheckDefault">See Tax included</label>
                </div>
            </div>

        </div>
    </div>


    <div class="row row-cols-lg-5 row-cols-md-4 row-cols-sm-2">

        <% for(listing of allListing){ %>
            <a class="listing-link" href="/listings/<%=listing._id %>">
                <div class="card col">
                    <img src="<%= listing.image.url %>" class="card-img-top" alt="listing_image"
                        style=" height: 24rem;">
                    <div class="card-img-overlay">
                        <h5 class="card-title"></h5>
                    </div>
                    <div class="card-body">
                        <p class="card-text">
                            <b>
                                <%=listing.title %>
                            </b>
                            <br>
                            &#8377;<%=listing.price.toLocaleString("en-IN")%>/night
                            <i id="tax-info"> &nbsp;& +18% GST</i>
                        </p>

                    </div>
                </div>
            </a>
            <% } %>
    </div>

    <script>
        // Toggle Switch Logic
        const switchToggle = document.getElementById('switchCheckDefault');
        switchToggle.addEventListener('change', () => {
            console.log('Toggle switch changed');
            const taxInfoElements = document.querySelectorAll('#tax-info');
            taxInfoElements.forEach(element => {
                if (switchToggle.checked) {
                    element.style.display = 'inline';
                } else {
                    element.style.display = 'none';
                }   
            });
        });
    </script>